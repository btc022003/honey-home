import{c as C,d as I,k as r,T as F,t as B,W as L,a0 as U,I as E,s as $,r as x,a7 as j,b as O,x as z,S as k,w as R,a5 as V,i as H,n as v,U as K,a8 as W,D as T,l as q,a9 as G}from"./index.62c3c838.js";const[J,_]=C("tag"),M={size:String,mark:Boolean,show:B,type:L("default"),color:String,plain:Boolean,round:Boolean,textColor:String,closeable:Boolean};var Q=I({name:J,props:M,emits:["close"],setup(e,{slots:n,emit:d}){const o=i=>{i.stopPropagation(),d("close",i)},l=()=>e.plain?{color:e.textColor||e.color,borderColor:e.color}:{color:e.textColor,background:e.color},u=()=>{var i;const{type:w,mark:h,plain:c,round:m,size:s,closeable:b}=e,g={mark:h,plain:c,round:m};s&&(g[s]=s);const f=b&&r(E,{name:"cross",class:[_("close"),U],onClick:o},null);return r("span",{style:l(),class:_([g,w])},[(i=n.default)==null?void 0:i.call(n),f])};return()=>r(F,{name:e.closeable?"van-fade":void 0},{default:()=>[e.show?u():null]})}});const X=$(Q),[Y,P]=C("image"),Z={src:String,alt:String,fit:String,position:String,round:Boolean,block:Boolean,width:v,height:v,radius:v,lazyLoad:Boolean,iconSize:v,showError:B,errorIcon:L("photo-fail"),iconPrefix:String,showLoading:B,loadingIcon:L("photo")};var p=I({name:Y,props:Z,emits:["load","error"],setup(e,{emit:n,slots:d}){const o=x(!1),l=x(!0),u=x(),{$Lazyload:i}=j().proxy,w=O(()=>{const a={width:z(e.width),height:z(e.height)};return k(e.radius)&&(a.overflow="hidden",a.borderRadius=z(e.radius)),a});R(()=>e.src,()=>{o.value=!1,l.value=!0});const h=a=>{l.value=!1,n("load",a)},c=a=>{o.value=!0,l.value=!1,n("error",a)},m=(a,y,S)=>S?S():r(E,{name:a,size:e.iconSize,class:y,classPrefix:e.iconPrefix},null),s=()=>{if(l.value&&e.showLoading)return r("div",{class:P("loading")},[m(e.loadingIcon,P("loading-icon"),d.loading)]);if(o.value&&e.showError)return r("div",{class:P("error")},[m(e.errorIcon,P("error-icon"),d.error)])},b=()=>{if(o.value||!e.src)return;const a={alt:e.alt,class:P("img"),style:{objectFit:e.fit,objectPosition:e.position}};return e.lazyLoad?K(r("img",T({ref:u},a),null),[[W("lazy"),e.src]]):r("img",T({src:e.src,onLoad:h,onError:c},a),null)},g=({el:a})=>{const y=()=>{a===u.value&&l.value&&h()};u.value?y():q(y)},f=({el:a})=>{a===u.value&&!o.value&&c()};return i&&V&&(i.$on("loaded",g),i.$on("error",f),H(()=>{i.$off("loaded",g),i.$off("error",f)})),()=>{var a;return r("div",{class:P({round:e.round,block:e.block}),style:w.value},[b(),s(),(a=d.default)==null?void 0:a.call(d)])}}});const ee=$(p),[ne,t]=C("card"),re={tag:String,num:v,desc:String,thumb:String,title:String,price:v,centered:Boolean,lazyLoad:Boolean,currency:L("\xA5"),thumbLink:String,originPrice:v};var ae=I({name:ne,props:re,emits:["click-thumb"],setup(e,{slots:n,emit:d}){const o=()=>{if(n.title)return n.title();if(e.title)return r("div",{class:[t("title"),"van-multi-ellipsis--l2"]},[e.title])},l=()=>{if(n.tag||e.tag)return r("div",{class:t("tag")},[n.tag?n.tag():r(X,{mark:!0,type:"danger"},{default:()=>[e.tag]})])},u=()=>n.thumb?n.thumb():r(ee,{src:e.thumb,fit:"cover",width:"100%",height:"100%",lazyLoad:e.lazyLoad},null),i=()=>{if(n.thumb||e.thumb)return r("a",{href:e.thumbLink,class:t("thumb"),onClick:c=>d("click-thumb",c)},[u(),l()])},w=()=>{if(n.desc)return n.desc();if(e.desc)return r("div",{class:[t("desc"),"van-ellipsis"]},[e.desc])},h=()=>{const c=e.price.toString().split(".");return r("div",null,[r("span",{class:t("price-currency")},[e.currency]),r("span",{class:t("price-integer")},[c[0]]),G("."),r("span",{class:t("price-decimal")},[c[1]])])};return()=>{var c,m,s;const b=n.num||k(e.num),g=n.price||k(e.price),f=n["origin-price"]||k(e.originPrice),a=b||g||f||n.bottom,y=g&&r("div",{class:t("price")},[n.price?n.price():h()]),S=f&&r("div",{class:t("origin-price")},[n["origin-price"]?n["origin-price"]():`${e.currency} ${e.originPrice}`]),D=b&&r("div",{class:t("num")},[n.num?n.num():`x${e.num}`]),N=n.footer&&r("div",{class:t("footer")},[n.footer()]),A=a&&r("div",{class:t("bottom")},[(c=n["price-top"])==null?void 0:c.call(n),y,S,D,(m=n.bottom)==null?void 0:m.call(n)]);return r("div",{class:t()},[r("div",{class:t("header")},[i(),r("div",{class:t("content",{centered:e.centered})},[r("div",null,[o(),w(),(s=n.tags)==null?void 0:s.call(n)]),A])]),N])}}});const ie=$(ae);export{ie as C};
