System.register(["./index-legacy.e90e7c68.js","./index-legacy.a6f13f08.js","./index-legacy.61ab08ce.js"],(function(e,t){"use strict";var r,a,l,n,o,i,s,u,c,d,g,m,f,p,v,h,y,b,w,x,S,k,V,B,C,M,A,E,P,I,T,$,j,W,z,F,q,L,O,D;return{setters:[e=>{r=e.c,a=e.n,l=e.t,n=e.d,o=e.u,i=e.ap,s=e.k,u=e.s,c=e.a6,d=e.aq,g=e.ar,m=e.a7,f=e.W,p=e.m,v=e.y,h=e.O,y=e.a,b=e.r,w=e.v,x=e.b,S=e.x,k=e.X,V=e.w,B=e.l,C=e.o,M=e.j,A=e.S,E=e.as,P=e.at,I=e.I,T=e.au,$=e.D,j=e.a9},e=>{W=e.u,z=e.p,F=e.g,q=e.s,L=e.r},e=>{O=e.c,D=e.a}],execute:function(){const[t,H]=r("form"),K={colon:Boolean,disabled:Boolean,readonly:Boolean,showError:Boolean,labelWidth:a,labelAlign:String,inputAlign:String,scrollToError:Boolean,validateFirst:Boolean,submitOnEnter:l,showErrorMessage:l,errorMessageAlign:String,validateTrigger:{type:[String,Array],default:"onBlur"}};var X=n({name:t,props:K,emits:["submit","failed"],setup(e,{emit:t,slots:r}){const{children:a,linkChildren:l}=o(i),n=e=>e?a.filter((t=>e.includes(t.name))):a,u=t=>{return"string"==typeof t?(e=>{const t=a.find((t=>t.name===e));return t?new Promise(((e,r)=>{t.validate().then((t=>{t?r(t):e()}))})):Promise.reject()})(t):e.validateFirst?(r=t,new Promise(((e,t)=>{const a=[];n(r).reduce(((e,t)=>e.then((()=>{if(!a.length)return t.validate().then((e=>{e&&a.push(e)}))}))),Promise.resolve()).then((()=>{a.length?t(a):e()}))}))):(e=>new Promise(((t,r)=>{const a=n(e);Promise.all(a.map((e=>e.validate()))).then((e=>{(e=e.filter(Boolean)).length?r(e):t()}))})))(t);var r},c=(e,t)=>{a.some((r=>r.name===e&&(r.$el.scrollIntoView(t),!0)))},d=()=>a.reduce(((e,t)=>(e[t.name]=t.formValue.value,e)),{}),g=()=>{const r=d();u().then((()=>t("submit",r))).catch((a=>{t("failed",{values:r,errors:a}),e.scrollToError&&a[0].name&&c(a[0].name)}))},m=e=>{z(e),g()};return l({props:e}),W({submit:g,validate:u,getValues:d,scrollToField:c,resetValidation:e=>{"string"==typeof e&&(e=[e]),n(e).forEach((e=>{e.resetValidation()}))},getValidationStatus:()=>a.reduce(((e,t)=>(e[t.name]=t.getValidationStatus(),e)),{})}),()=>{var e;return s("form",{class:H(),onSubmit:m},[null==(e=r.default)?void 0:e.call(r)])}}});function G(e){return Array.isArray(e)?!e.length:0!==e&&!e}function J(e,t){const{message:r}=t;return g(r)?r(e,t):r||""}function N({target:e}){e.composing=!0}function Q({target:e}){e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}function R(e){return[...e].length}e("F",u(X));let U=0;const[Y,Z]=r("field"),_={id:String,name:String,leftIcon:String,rightIcon:String,autofocus:Boolean,clearable:Boolean,maxlength:a,formatter:Function,clearIcon:f("clear"),modelValue:p(""),inputAlign:String,placeholder:String,autocomplete:String,errorMessage:String,enterkeyhint:String,clearTrigger:f("focus"),formatTrigger:f("onChange"),error:{type:Boolean,default:null},disabled:{type:Boolean,default:null},readonly:{type:Boolean,default:null}},ee=v({},O,_,{rows:a,type:f("text"),rules:Array,autosize:[Boolean,Object],labelWidth:a,labelClass:h,labelAlign:String,showWordLimit:Boolean,errorMessageAlign:String,colon:{type:Boolean,default:null}});var te=n({name:Y,props:ee,emits:["blur","focus","clear","keypress","click-input","end-validate","start-validate","click-left-icon","click-right-icon","update:modelValue"],setup(e,{emit:t,slots:r}){const a=function(){const e=m(),{name:t="unknown"}=(null==e?void 0:e.type)||{};return`${t}-${++U}`}(),l=y({status:"unvalidated",focused:!1,validateMessage:""}),n=b(),o=b(),u=b(),{parent:g}=w(i),f=()=>{var t;return String(null!=(t=e.modelValue)?t:"")},p=t=>A(e[t])?e[t]:g&&A(g.props[t])?g.props[t]:void 0,v=x((()=>{const t=p("readonly");if(e.clearable&&!t){const t=""!==f(),r="always"===e.clearTrigger||"focus"===e.clearTrigger&&l.focused;return t&&r}return!1})),h=x((()=>u.value&&r.input?u.value():e.modelValue)),O=e=>e.reduce(((e,t)=>e.then((()=>{if("failed"===l.status)return;let{value:e}=h;if(t.formatter&&(e=t.formatter(e,t)),!function(e,t){if(G(e)){if(t.required)return!1;if(!1===t.validateEmpty)return!0}return!(t.pattern&&!t.pattern.test(String(e)))}(e,t))return l.status="failed",void(l.validateMessage=J(e,t));if(t.validator){if(G(e)&&!1===t.validateEmpty)return;return function(e,t){return new Promise((r=>{const a=t.validator(e,t);d(a)?a.then(r):r(a)}))}(e,t).then((r=>{r&&"string"==typeof r?(l.status="failed",l.validateMessage=r):!1===r&&(l.status="failed",l.validateMessage=J(e,t))}))}}))),Promise.resolve()),H=()=>{l.status="unvalidated",l.validateMessage=""},K=()=>t("end-validate",{status:l.status}),X=(r=e.rules)=>new Promise((a=>{H(),r?(t("start-validate"),O(r).then((()=>{"failed"===l.status?(a({name:e.name,message:l.validateMessage}),K()):(l.status="passed",a(),K())}))):a()})),Y=t=>{if(g&&e.rules){const{validateTrigger:r}=g.props,a=E(r).includes(t),l=e.rules.filter((e=>e.trigger?E(e.trigger).includes(t):a));l.length&&X(l)}},_=(r,a="onChange")=>{if(r=(t=>{const{maxlength:r}=e;if(A(r)&&R(t)>r){const e=f();return e&&R(e)===+r?e:function(e,t){return[...e].slice(0,t).join("")}(t,+r)}return t})(r),"number"===e.type||"digit"===e.type){const t="number"===e.type;r=P(r,t,t)}e.formatter&&a===e.formatTrigger&&(r=e.formatter(r)),n.value&&n.value.value!==r&&(n.value.value=r),r!==e.modelValue&&t("update:modelValue",r)},ee=e=>{e.target.composing||_(e.target.value)},te=()=>{var e;return null==(e=n.value)?void 0:e.blur()},re=()=>{const t=n.value;"textarea"===e.type&&e.autosize&&t&&function(e,t){const r=F();e.style.height="auto";let a=e.scrollHeight;if(c(t)){const{maxHeight:e,minHeight:r}=t;void 0!==e&&(a=Math.min(a,e)),void 0!==r&&(a=Math.max(a,r))}a&&(e.style.height=`${a}px`,q(r))}(t,e.autosize)},ae=e=>{l.focused=!0,t("focus",e),B(re),p("readonly")&&te()},le=e=>{p("readonly")||(l.focused=!1,_(f(),"onBlur"),t("blur",e),Y("onBlur"),B(re),L())},ne=e=>t("click-input",e),oe=e=>t("click-left-icon",e),ie=e=>t("click-right-icon",e),se=x((()=>"boolean"==typeof e.error?e.error:!(!g||!g.props.showError||"failed"!==l.status)||void 0)),ue=x((()=>{const e=p("labelWidth");if(e)return{width:S(e)}})),ce=r=>{13===r.keyCode&&(g&&g.props.submitOnEnter||"textarea"===e.type||z(r),"search"===e.type&&te()),t("keypress",r)},de=()=>e.id||`${a}-input`,ge=()=>{const t=Z("control",[p("inputAlign"),{error:se.value,custom:!!r.input,"min-height":"textarea"===e.type&&!e.autosize}]);if(r.input)return s("div",{class:t,onClick:ne},[r.input()]);const l={id:de(),ref:n,name:e.name,rows:void 0!==e.rows?+e.rows:void 0,class:t,disabled:p("disabled"),readonly:p("readonly"),autofocus:e.autofocus,placeholder:e.placeholder,autocomplete:e.autocomplete,enterkeyhint:e.enterkeyhint,"aria-labelledby":e.label?`${a}-label`:void 0,onBlur:le,onFocus:ae,onInput:ee,onClick:ne,onChange:Q,onKeypress:ce,onCompositionend:Q,onCompositionstart:N};return"textarea"===e.type?s("textarea",l,null):s("input",$("number"===(o=e.type)?{type:"text",inputmode:"decimal"}:"digit"===o?{type:"tel",inputmode:"numeric"}:{type:o},l),null);var o},me=()=>{const t=r["right-icon"];if(e.rightIcon||t)return s("div",{class:Z("right-icon"),onClick:ie},[t?t():s(I,{name:e.rightIcon,classPrefix:e.iconPrefix},null)])},fe=()=>{if(e.showWordLimit&&e.maxlength){const t=R(f());return s("div",{class:Z("word-limit")},[s("span",{class:Z("word-num")},[t]),j("/"),e.maxlength])}},pe=()=>{if(g&&!1===g.props.showErrorMessage)return;const t=e.errorMessage||l.validateMessage;if(t){const e=r["error-message"],a=p("errorMessageAlign");return s("div",{class:Z("error-message",a)},[e?e({message:t}):t])}},ve=()=>[s("div",{class:Z("body")},[ge(),v.value&&s(I,{ref:o,name:e.clearIcon,class:Z("clear")},null),me(),r.button&&s("div",{class:Z("button")},[r.button()])]),fe(),pe()];return W({blur:te,focus:()=>{var e;return null==(e=n.value)?void 0:e.focus()},validate:X,formValue:h,resetValidation:H,getValidationStatus:()=>l.status}),k(T,{customValue:u,resetValidation:H,validateWithTrigger:Y}),V((()=>e.modelValue),(()=>{_(f()),H(),Y("onChange"),B(re)})),C((()=>{_(f(),e.formatTrigger),B(re)})),M("touchstart",(e=>{z(e),t("update:modelValue",""),t("clear",e)}),{target:x((()=>{var e;return null==(e=o.value)?void 0:e.$el}))}),()=>{const t=p("disabled"),l=p("labelAlign"),n=(()=>{const t=p("colon")?":":"";return r.label?[r.label(),t]:e.label?s("label",{id:`${a}-label`,for:de()},[e.label+t]):void 0})(),o=(()=>{const t=r["left-icon"];if(e.leftIcon||t)return s("div",{class:Z("left-icon"),onClick:oe},[t?t():s(I,{name:e.leftIcon,classPrefix:e.iconPrefix},null)])})();return s(D,{size:e.size,icon:e.leftIcon,class:Z({error:se.value,disabled:t,[`label-${l}`]:l}),center:e.center,border:e.border,isLink:e.isLink,clickable:e.clickable,titleStyle:ue.value,valueClass:Z("value"),titleClass:[Z("label",[l,{required:e.required}]),e.labelClass],arrowDirection:e.arrowDirection},{icon:o?()=>o:null,title:n?()=>n:null,value:ve,extra:r.extra})}}});e("a",u(te))}}}));
