"use strict";(self["webpackChunkdemacia_shop"]=self["webpackChunkdemacia_shop"]||[]).push([[771],{3771:function(t,e,a){a.r(e),a.d(e,{default:function(){return d}});var c=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"cart"},[a("van-nav-bar",{attrs:{title:"购物车","left-text":"返回","right-text":"首页","left-arrow":"",border:""},on:{"click-left":t.onClickLeft,"click-right":t.onClickRight}}),t._l(t.datalist,(function(e){return a("div",{key:e.id,staticClass:"cartList"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.checked2,expression:"checked2"}],staticClass:"checked1",attrs:{type:"checkbox"},domProps:{value:e,checked:Array.isArray(t.checked2)?t._i(t.checked2,e)>-1:t.checked2},on:{change:[function(a){var c=t.checked2,i=a.target,s=!!i.checked;if(Array.isArray(c)){var n=e,r=t._i(c,n);i.checked?r<0&&(t.checked2=c.concat([n])):r>-1&&(t.checked2=c.slice(0,r).concat(c.slice(r+1)))}else t.checked2=s},t.handleItemChecked]}}),a("div",{staticClass:"cartList-right"},[a("van-card",{attrs:{price:e.price,desc:"非常棒的商品",title:e.product.name,thumb:e.product.coverImage},on:{"click-thumb":function(a){return t.toDetail(e)}},scopedSlots:t._u([{key:"tags",fn:function(){return[a("van-tag",{attrs:{plain:"",type:"danger"}},[t._v("标签")]),a("van-tag",{attrs:{plain:"",type:"danger"}},[t._v("标签")])]},proxy:!0},{key:"footer",fn:function(){return[a("van-button",{attrs:{size:"mini",disabled:1===e.amount},on:{click:function(t){e.amount--}}},[t._v("减一件")]),a("span",{staticClass:"number",domProps:{innerHTML:t._s(e.amount)}}),a("van-button",{attrs:{size:"mini",disabled:e.amount===e.limit},on:{click:function(t){e.amount++}}},[t._v("加一件")])]},proxy:!0}],null,!0)}),a("button",{staticClass:"del",on:{click:function(a){return t.del(e)}}},[t._v("删除")])],1)])})),a("van-submit-bar",{attrs:{price:t.sum(),"button-text":"提交订单"},on:{submit:t.onSubmit}},[a("van-checkbox",{on:{change:t.handleAllChecked},model:{value:t.isAll,callback:function(e){t.isAll=e},expression:"isAll"}},[t._v("全选")])],1)],2)},i=[],s=a(2809),n={data(){return{checked2:[],isAll:!1,datalist:[]}},created(){this.cartList()},methods:{async del(t){const e=await(0,s.WZ)(t.id);console.log(e),this.cartList()},async cartList(){const t=await(0,s.NY)();this.datalist=t.data,console.log(t.data),console.log(t.data.map((t=>t.product)))},sum(){var t=0;return this.checked2.forEach((e=>{t+=e.price*e.amount})),100*t},onClickLeft(){this.$router.go(-1)},onClickRight(){this.$router.push({name:"home"})},handleItemChecked(){this.checked2.length===this.datalist.length?this.isAll=!0:this.isAll=!1},handleAllChecked(){this.isAll?this.checked2=this.datalist:this.checked2=[]},onSubmit(){0!=this.checked2.length?this.$router.push({name:"Submit",query:{dataName:this.checked2}}):this.$toast("未选中商品")},toDetail(t){this.$router.push({name:"detail",params:{id:t.product.id}})}}},r=n,l=a(3736),o=(0,l.Z)(r,c,i,!1,null,"ba1c2398",null),d=o.exports}}]);
//# sourceMappingURL=771.06fe219a.js.map