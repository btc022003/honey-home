{"version":3,"file":"js/771-legacy.5eeecbe2.js","mappings":"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","sources":["webpack://demacia-shop/./src/views/CartView.vue?597b","webpack://demacia-shop/src/views/CartView.vue","webpack://demacia-shop/./src/views/CartView.vue?1f6b","webpack://demacia-shop/./src/views/CartView.vue"],"sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"cart\"},[_c('van-nav-bar',{attrs:{\"title\":\"购物车\",\"left-text\":\"返回\",\"right-text\":\"首页\",\"left-arrow\":\"\",\"border\":\"\"},on:{\"click-left\":_vm.onClickLeft,\"click-right\":_vm.onClickRight}}),_vm._l((_vm.datalist),function(item){return _c('div',{key:item.id,staticClass:\"cartList\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.checked2),expression:\"checked2\"}],staticClass:\"checked1\",attrs:{\"type\":\"checkbox\"},domProps:{\"value\":item,\"checked\":Array.isArray(_vm.checked2)?_vm._i(_vm.checked2,item)>-1:(_vm.checked2)},on:{\"change\":[function($event){var $$a=_vm.checked2,$$el=$event.target,$$c=$$el.checked?(true):(false);if(Array.isArray($$a)){var $$v=item,$$i=_vm._i($$a,$$v);if($$el.checked){$$i<0&&(_vm.checked2=$$a.concat([$$v]))}else{$$i>-1&&(_vm.checked2=$$a.slice(0,$$i).concat($$a.slice($$i+1)))}}else{_vm.checked2=$$c}},_vm.handleItemChecked]}}),_c('div',{staticClass:\"cartList-right\"},[_c('van-card',{attrs:{\"price\":item.price,\"desc\":\"非常棒的商品\",\"title\":item.product.name,\"thumb\":item.product.coverImage},on:{\"click-thumb\":function($event){return _vm.toDetail(item)}},scopedSlots:_vm._u([{key:\"tags\",fn:function(){return [_c('van-tag',{attrs:{\"plain\":\"\",\"type\":\"danger\"}},[_vm._v(\"标签\")]),_c('van-tag',{attrs:{\"plain\":\"\",\"type\":\"danger\"}},[_vm._v(\"标签\")])]},proxy:true},{key:\"footer\",fn:function(){return [_c('van-button',{attrs:{\"size\":\"mini\",\"disabled\":item.amount === 1},on:{\"click\":function($event){item.amount--}}},[_vm._v(\"减一件\")]),_c('span',{staticClass:\"number\",domProps:{\"innerHTML\":_vm._s(item.amount)}}),_c('van-button',{attrs:{\"size\":\"mini\",\"disabled\":item.amount === item.limit},on:{\"click\":function($event){item.amount++}}},[_vm._v(\"加一件\")])]},proxy:true}],null,true)}),_c('button',{staticClass:\"del\",on:{\"click\":function($event){return _vm.del(item)}}},[_vm._v(\"删除\")])],1)])}),_c('van-submit-bar',{attrs:{\"price\":_vm.sum(),\"button-text\":\"提交订单\"},on:{\"submit\":_vm.onSubmit}},[_c('van-checkbox',{on:{\"change\":_vm.handleAllChecked},model:{value:(_vm.isAll),callback:function ($$v) {_vm.isAll=$$v},expression:\"isAll\"}},[_vm._v(\"全选\")])],1)],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"cart\">\r\n    <van-nav-bar\r\n      title=\"购物车\"\r\n      left-text=\"返回\"\r\n      right-text=\"首页\"\r\n      left-arrow\r\n      border\r\n      @click-left=\"onClickLeft\"\r\n      @click-right=\"onClickRight\"\r\n    ></van-nav-bar>\r\n    <div class=\"cartList\" v-for=\"item in datalist\" :key=\"item.id\">\r\n      <input\r\n        type=\"checkbox\"\r\n        v-model=\"checked2\"\r\n        @change=\"handleItemChecked\"\r\n        :value=\"item\"\r\n        class=\"checked1\"\r\n      />\r\n      <div class=\"cartList-right\">\r\n        <van-card\r\n          :price=\"item.price\"\r\n          desc=\"非常棒的商品\"\r\n          :title=\"item.product.name\"\r\n          :thumb=\"item.product.coverImage\"\r\n          @click-thumb=\"toDetail(item)\"\r\n        >\r\n          <template #tags>\r\n            <van-tag plain type=\"danger\">标签</van-tag>\r\n            <van-tag plain type=\"danger\">标签</van-tag>\r\n          </template>\r\n          <template #footer>\r\n            <van-button\r\n              size=\"mini\"\r\n              @click=\"item.amount--\"\r\n              :disabled=\"item.amount === 1\"\r\n              >减一件</van-button\r\n            ><span v-html=\"item.amount\" class=\"number\"></span>\r\n            <van-button\r\n              size=\"mini\"\r\n              @click=\"item.amount++\"\r\n              :disabled=\"item.amount === item.limit\"\r\n              >加一件</van-button\r\n            >\r\n          </template>\r\n        </van-card>\r\n        <button @click=\"del(item)\" class=\"del\">删除</button>\r\n      </div>\r\n    </div>\r\n    <van-submit-bar :price=\"sum()\" button-text=\"提交订单\" @submit=\"onSubmit\">\r\n      <van-checkbox v-model=\"isAll\" @change=\"handleAllChecked\"\r\n        >全选</van-checkbox\r\n      >\r\n    </van-submit-bar>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { cartListAPI } from \"../services/products\";\r\nimport { delCartListAPI } from \"../services/products\";\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      checked2: [],\r\n      isAll: false,\r\n      datalist: [],\r\n    };\r\n  },\r\n  created() {\r\n    this.cartList();\r\n  },\r\n  methods: {\r\n    async del(item) {\r\n      const delCart = await delCartListAPI(item.id);\r\n      console.log(delCart);\r\n      this.cartList();\r\n    },\r\n    async cartList() {\r\n      const cart = await cartListAPI();\r\n      this.datalist = cart.data;\r\n      console.log(cart.data);\r\n      console.log(cart.data.map((item) => item.product));\r\n    },\r\n    sum() {\r\n      var total = 0;\r\n      //累加计算 checkList 数组的每一项的 价格*数量\r\n      this.checked2.forEach((item) => {\r\n        total += item.price * item.amount;\r\n      });\r\n      return total * 100;\r\n    },\r\n    //返回上一页\r\n    onClickLeft() {\r\n      this.$router.go(-1);\r\n    },\r\n    //返回首页\r\n    onClickRight() {\r\n      this.$router.push({\r\n        name: \"home\",\r\n      });\r\n    },\r\n    //单选\r\n    handleItemChecked() {\r\n      if (this.checked2.length === this.datalist.length) {\r\n        // console.log(\"全选\")\r\n        this.isAll = true;\r\n      } else {\r\n        // console.log(\"未全选\")\r\n        this.isAll = false;\r\n      }\r\n    },\r\n    //全选\r\n    handleAllChecked() {\r\n      if (this.isAll) {\r\n        // this.checked = true;\r\n        this.checked2 = this.datalist;\r\n      } else {\r\n        this.checked2 = [];\r\n        // this.checked = false;\r\n      }\r\n    },\r\n    //跳转结算页面\r\n    onSubmit() {\r\n      // this.$router.push({\r\n      //   name: \"Submit\",\r\n      // });\r\n      if (this.checked2.length != 0) {\r\n        this.$router.push({\r\n          name: \"Submit\",\r\n          query: { dataName: this.checked2 },\r\n        });\r\n      } else {\r\n        this.$toast(\"未选中商品\");\r\n      }\r\n    },\r\n    //跳转详情页\r\n    toDetail(item) {\r\n      this.$router.push({\r\n        name: \"detail\",\r\n        params: {\r\n          id: item.product.id,\r\n        },\r\n      });\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.img-icon {\r\n  height: 20px;\r\n}\r\n.cartList {\r\n  widows: 100vw;\r\n  display: flex;\r\n  background-color: #fafafa;\r\n  position: relative;\r\n}\r\n.del {\r\n  position: absolute;\r\n  display: block;\r\n  top: 40px;\r\n  right: 20px;\r\n  height: 20px;\r\n  font-size: 16px;\r\n  line-height: 20px;\r\n}\r\n.cartList-right {\r\n  flex: 1;\r\n}\r\n.checked1 {\r\n  margin-left: 10px;\r\n  margin-top: 45px;\r\n}\r\n.delete-button {\r\n  height: 100%;\r\n}\r\n.number {\r\n  font-size: 20px;\r\n  margin: 0 10px;\r\n}\r\n</style>\r\n","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./CartView.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./CartView.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./CartView.vue?vue&type=template&id=ba1c2398&scoped=true&\"\nimport script from \"./CartView.vue?vue&type=script&lang=js&\"\nexport * from \"./CartView.vue?vue&type=script&lang=js&\"\nimport style0 from \"./CartView.vue?vue&type=style&index=0&id=ba1c2398&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"ba1c2398\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","on","onClickLeft","onClickRight","_l","item","key","id","directives","name","rawName","value","expression","domProps","Array","isArray","checked2","_i","$event","$$a","$$el","target","$$c","checked","$$v","$$i","concat","slice","handleItemChecked","price","product","coverImage","toDetail","scopedSlots","_u","fn","_v","proxy","amount","_s","limit","del","sum","onSubmit","handleAllChecked","model","callback","isAll","staticRenderFns","data","datalist","created","cartList","methods","delCartListAPI","delCart","console","cartListAPI","cart","total","forEach","$router","go","push","length","query","dataName","$toast","params","component"],"sourceRoot":""}