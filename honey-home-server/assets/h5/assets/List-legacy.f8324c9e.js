System.register(["./index-legacy.40218cae.js","./request-legacy.4f5c48b3.js","./products-legacy.283a116b.js","./index-legacy.617e0240.js","./index-legacy.f7be03cc.js"],(function(e,t){"use strict";var a,l,i,n,d,o,r,s,u,c,v,f,m,p,g,h,b,x,y,k,C,T,j,_,S,V,L,q,A,B,w,I,D,E,F,H,M,O,P,z,G,J,K=document.createElement("style");return K.innerHTML=".list[data-v-e8779954]{display:flex}.products[data-v-e8779954]{flex:1;overflow:auto}\n",document.head.appendChild(K),{setters:[e=>{a=e.ad,l=e.c,i=e.m,n=e.W,d=e.t,o=e.d,r=e.r,s=e.ae,u=e.w,c=e.af,v=e.o,f=e.j,m=e.k,p=e.l,g=e.ag,h=e.s,b=e.u,x=e.y,y=e.z,k=e.n,C=e.A,T=e.v,j=e.E,_=e.D,S=e.ah,V=e.ai,L=e.aj,q=e.F,A=e.G,B=e.H,w=e.J,I=e.N,D=e.K,E=e.L,F=e.M},e=>{H=e.d},e=>{M=e.a,O=e.l},e=>{P=e.u,z=e.i,G=e.L},e=>{J=e.C}],execute:function(){const t=Symbol(),[K,N,U]=l("list"),W={error:Boolean,offset:i(300),loading:Boolean,finished:Boolean,errorText:String,direction:n("down"),loadingText:String,finishedText:String,immediateCheck:d};var Q=o({name:K,props:W,emits:["load","update:error","update:loading"],setup(e,{emit:l,slots:i}){const n=r(!1),d=r(),o=r(),h=a(t,null),b=s(d),x=()=>{p((()=>{if(n.value||e.finished||e.error||!1===(null==h?void 0:h.value))return;const{offset:t,direction:a}=e,i=g(b);if(!i.height||z(d))return;let r=!1;const s=g(o);r="up"===a?i.top-s.top<=t:s.bottom-i.bottom<=t,r&&(n.value=!0,l("update:loading",!0),l("load"))}))},y=()=>{if(e.finished){const t=i.finished?i.finished():e.finishedText;if(t)return m("div",{class:N("finished-text")},[t])}},k=()=>{l("update:error",!1),x()},C=()=>{if(e.error){const t=i.error?i.error():e.errorText;if(t)return m("div",{role:"button",class:N("error-text"),tabindex:0,onClick:k},[t])}},T=()=>{if(n.value&&!e.finished)return m("div",{class:N("loading")},[i.loading?i.loading():m(G,{class:N("loading-icon")},{default:()=>[e.loadingText||U("loading")]})])};return u((()=>[e.loading,e.finished,e.error]),x),h&&u(h,(e=>{e&&x()})),c((()=>{n.value=e.loading})),v((()=>{e.immediateCheck&&x()})),P({check:x}),f("scroll",x,{target:b,passive:!0}),()=>{var t;const a=null==(t=i.default)?void 0:t.call(i),l=m("div",{ref:o,class:N("placeholder")},null);return m("div",{ref:d,role:"feed",class:N(),"aria-busy":n.value},["down"===e.direction?a:l,T(),y(),C(),"up"===e.direction?a:l])}}});const R=h(Q),[X,Y]=l("sidebar"),Z=Symbol(X),$={modelValue:i(0)};var ee=o({name:X,props:$,emits:["change","update:modelValue"],setup(e,{emit:t,slots:a}){const{linkChildren:l}=b(Z),i=()=>+e.modelValue;return l({getActive:i,setActive:e=>{e!==i()&&(t("update:modelValue",e),t("change",e))}}),()=>{var e;return m("div",{role:"tablist",class:Y()},[null==(e=a.default)?void 0:e.call(a)])}}});const te=h(ee),[ae,le]=l("sidebar-item"),ie=x({},y,{dot:Boolean,title:String,badge:k,disabled:Boolean,badgeProps:Object});var ne=o({name:ae,props:ie,emits:["click"],setup(e,{emit:t,slots:a}){const l=C(),{parent:i,index:n}=T(Z);if(!i)return;const d=()=>{e.disabled||(t("click",n.value),i.setActive(n.value),l())};return()=>{const{dot:t,badge:l,title:o,disabled:r}=e,s=n.value===i.getActive();return m("div",{role:"tab",class:le({select:s,disabled:r}),tabindex:r?void 0:0,"aria-selected":s,onClick:d},[m(j,_({dot:t,class:le("text"),content:l},e.badgeProps),{default:()=>[a.title?a.title():o]})])}}});const de=h(ne),oe={class:"list"},re={class:"products"};e("default",((e,t)=>{const a=e.__vccOpts||e;for(const[l,i]of t)a[l]=i;return a})({__name:"List",setup(e){const t=S(),a=V(),l=r(a.query.tid),i=r([]);M().then((e=>{i.value=e.data,d.value=i.value.findIndex((e=>e.id==l.value))}));const n=r([]),d=r(0),o=()=>{u.value=!0,O(s.value,l.value).then((e=>{n.value.push(...e.data),u.value=!1,v.value=e.pages,s.value+=1}))};L(((e,t)=>{l.value=e.query.tid,d.value=i.value.findIndex((e=>e.id==l.value)),v.value=1,s.value=1,c.value=!1,n.value=[],o()}));const s=r(1),u=r(!1),c=r(!1),v=r(1),f=()=>{v.value<s.value?c.value=!0:o()};return(e,a)=>(q(),A("div",oe,[m(w(te),{modelValue:d.value,"onUpdate:modelValue":a[0]||(a[0]=e=>d.value=e)},{default:B((()=>[(q(!0),A(D,null,E(i.value,(e=>(q(),F(w(de),{title:e.name,key:e.id,to:{name:"List",query:{tid:e.id}}},null,8,["title","to"])))),128))])),_:1},8,["modelValue"]),I("div",re,[m(w(R),{loading:u.value,finished:c.value,onLoad:f,"finished-text":"加载完成"},{default:B((()=>[(q(!0),A(D,null,E(n.value,(e=>(q(),F(w(J),{num:e.amount,price:e.price.toFixed(2),title:e.name,thumb:w(H)(e.coverImage),onClickThumb:a=>{return l=e.id,void t.push({name:"Detail",query:{id:l}});var l}},null,8,["num","price","title","thumb","onClickThumb"])))),256))])),_:1},8,["loading","finished"])])]))}},[["__scopeId","data-v-e8779954"]]))}}}));
